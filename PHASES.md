# üìã –ü–æ—ç—Ç–∞–ø–Ω—ã–π –ø–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ HabiBot

## üéØ –§–∞–∑–∞ 1: –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è –∏ –±–∞–∑–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ ‚úÖ
- [x] –°–æ–∑–¥–∞—Ç—å solution (.sln) –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–∞–ø–æ–∫ `src/` –∏ `tests/`
- [x] –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç—ã –ø–æ —Å–ª–æ—è–º Clean Architecture:
  - `src/HabiBot.Domain` (class library)
  - `src/HabiBot.Application` (class library)
  - `src/HabiBot.Infrastructure` (class library)
  - `src/HabiBot.Bot` (console/web app - —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞)
  - `tests/HabiBot.Tests` (xUnit test project)
- [x] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–µ–∂–¥—É –ø—Ä–æ–µ–∫—Ç–∞–º–∏
- [x] –î–æ–±–∞–≤–∏—Ç—å `.gitignore` –∏ `Directory.Build.props`
- [x] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Nullable Reference Types –∏ file-scoped namespaces

## üèóÔ∏è –§–∞–∑–∞ 2: Domain Layer (–¥–æ–º–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å) ‚úÖ
- [x] –°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏:
  - `User` (Id: long –¥–ª—è Telegram, Name, TimeZone, CreatedAt/UpdatedAt)
  - `Habit` (Name, ReminderTime, Frequency)
  - `HabitLog` (–æ—Ç–º–µ—Ç–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è)
- [x] –î–æ–±–∞–≤–∏—Ç—å Audit –ø–æ–ª—è (CreatedAt, UpdatedAt, IsDeleted)
- [x] –°–æ–∑–¥–∞—Ç—å value objects –∏ enums (HabitFrequency)
- [x] –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ (IRepository<T>, IUnitOfWork)

## üîß –§–∞–∑–∞ 3: Infrastructure - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å NuGet: EF Core, Npgsql.EntityFrameworkCore.PostgreSQL
- [ ] –°–æ–∑–¥–∞—Ç—å `HabiBotDbContext` —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è–º–∏ —Å—É—â–Ω–æ—Å—Ç–µ–π
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL —á–µ—Ä–µ–∑ appsettings.json
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Repository Pattern –∏ Unit of Work
- [ ] –°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤—É—é –º–∏–≥—Ä–∞—Ü–∏—é –ë–î (`Initial`)
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å User Secrets –¥–ª—è —Å—Ç—Ä–æ–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (dev)

## üì° –§–∞–∑–∞ 4: Telegram API Integration (–ë–ï–ó –±–∏–±–ª–∏–æ—Ç–µ–∫)
- [ ] –°–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É `Models/Telegram/` –≤ Infrastructure
- [ ] –°–æ–∑–¥–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ DTO (record types) —Å `[JsonPropertyName]`:
  - `Update`, `Message`, `Chat`, `User`
  - `SendMessageRequest`, `SendMessageResponse`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `ITelegramApiClient` –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `TelegramApiClient` –∏—Å–ø–æ–ª—å–∑—É—è **—Ç–æ–ª—å–∫–æ HttpClient**
- [ ] –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å HttpClient —á–µ—Ä–µ–∑ `IHttpClientFactory` –≤ DI
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Long Polling (`getUpdates`) –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π
- [ ] –°–æ—Ö—Ä–∞–Ω–∏—Ç—å Bot Token –≤ User Secrets

## üíº –§–∞–∑–∞ 5: Application Layer - –°–µ—Ä–≤–∏—Å—ã
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å NuGet: FluentValidation, FluentValidation.DependencyInjectionExtensions
- [ ] –°–æ–∑–¥–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã —Å–µ—Ä–≤–∏—Å–æ–≤:
  - `IUserService` (—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –ø–æ–∏—Å–∫)
  - `IHabitService` (CRUD –ø—Ä–∏–≤—ã—á–µ–∫)
  - `IHabitLogService` (–æ—Ç–º–µ—Ç–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è)
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–µ—Ä–≤–∏—Å—ã —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
- [ ] –°–æ–∑–¥–∞—Ç—å DTO –¥–ª—è –∫–æ–º–∞–Ω–¥ (CreateHabitDto, etc.)
- [ ] –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã FluentValidation

## ü§ñ –§–∞–∑–∞ 6: Bot - State Management –∏ –∫–æ–º–∞–Ω–¥—ã
- [ ] –°–æ–∑–¥–∞—Ç—å FSM (Finite State Machine) –¥–ª—è –¥–∏–∞–ª–æ–≥–æ–≤
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å In-Memory Cache –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- [ ] –°–æ–∑–¥–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `IBotCommand` —Å –º–µ—Ç–æ–¥–æ–º `ExecuteAsync`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –±–∞–∑–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã MVP:
  - `/start` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–º–Ω–æ–≥–æ—à–∞–≥–æ–≤—ã–π –¥–∏–∞–ª–æ–≥: —Å–ø—Ä–æ—Å–∏—Ç—å –∏–º—è)
  - `/add` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–≤—ã—á–∫–∏ (–º–Ω–æ–≥–æ—à–∞–≥–æ–≤—ã–π: –Ω–∞–∑–≤–∞–Ω–∏–µ ‚Üí –≤—Ä–µ–º—è)
  - `/list` - —Å–ø–∏—Å–æ–∫ –ø—Ä–∏–≤—ã—á–µ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞ "–í—ã–ø–æ–ª–Ω–µ–Ω–æ!" –¥–ª—è –æ—Ç–º–µ—Ç–∫–∏ –ø—Ä–∏–≤—ã—á–∫–∏
- [ ] –°–æ–∑–¥–∞—Ç—å Command Router –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –∫–æ–º–∞–Ω–¥
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

## üìä –§–∞–∑–∞ 7: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –æ—Ç—á–µ—Ç—ã
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `IStatisticsService`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É `/stats` —Å –≤—ã–±–æ—Ä–æ–º –ø–µ—Ä–∏–æ–¥–∞
- [ ] –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤:
  - –ó–∞ –¥–µ–Ω—å
  - –ó–∞ –Ω–µ–¥–µ–ª—é
  - –ó–∞ –º–µ—Å—è—Ü
- [ ] –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –¥–ª—è –∫—Ä–∞—Å–∏–≤–æ–≥–æ –≤—ã–≤–æ–¥–∞ –≤ Telegram

## ‚úèÔ∏è –§–∞–∑–∞ 8: –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ
- [ ] –ö–æ–º–∞–Ω–¥–∞ `/edit` - —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–≤—ã—á–∫–∏ (–Ω–∞–∑–≤–∞–Ω–∏–µ, –≤—Ä–µ–º—è, —á–∞—Å—Ç–æ—Ç–∞)
- [ ] –ö–æ–º–∞–Ω–¥–∞ `/delete` - —É–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–∏–≤—ã—á–∫–∏ (–º—è–≥–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ)
- [ ] Inline –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –¥–ª—è –≤—ã–±–æ—Ä–∞ –ø—Ä–∏–≤—ã—á–∫–∏

## üîí –§–∞–∑–∞ 9: –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Rate Limiting (–∑–∞—â–∏—Ç–∞ –æ—Ç —Å–ø–∞–º–∞)
- [ ] Sanitize –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π
- [ ] –î–æ–±–∞–≤–∏—Ç—å correlation ID –¥–ª—è —Ç—Ä–µ–π—Å–∏–Ω–≥–∞ –∑–∞–ø—Ä–æ—Å–æ–≤
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Serilog —Å structured logging
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–∞–∑–Ω—ã–µ log levels (Debug/Information)

## üß™ –§–∞–∑–∞ 10: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å NuGet: xUnit, Moq, FluentAssertions
- [ ] Unit —Ç–µ—Å—Ç—ã –¥–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤ (HabitService, UserService)
- [ ] Unit —Ç–µ—Å—Ç—ã –¥–ª—è –∫–æ–º–∞–Ω–¥ –±–æ—Ç–∞
- [ ] Integration —Ç–µ—Å—Ç—ã –¥–ª—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ (InMemory DB)
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–æ–≤
- [ ] –ü–æ–∫—Ä—ã—Ç–∏–µ –∫—Ä–∏—Ç–∏—á–Ω–æ–π –ª–æ–≥–∏–∫–∏ —Ç–µ—Å—Ç–∞–º–∏ >80%

## üöÄ –§–∞–∑–∞ 11: MVP Release
- [ ] –§–∏–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∫–æ–º–∞–Ω–¥
- [ ] –û–±–Ω–æ–≤–∏—Ç—å README —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏ –ø–æ –∑–∞–ø—É—Å–∫—É
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API (XML –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏)
- [ ] –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –¥–µ–ø–ª–æ—é (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

---

## üåü –§–∞–∑–∞ 12+ (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ñ–∏—á–∏ - –ø–æ—Å–ª–µ MVP)

### ‚è∞ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è (Quartz.NET)
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å NuGet: Quartz, Quartz.Extensions.Hosting
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Quartz.NET –≤ DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
- [ ] –°–æ–∑–¥–∞—Ç—å Job –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–æ–Ω (TimeZoneInfo)
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π

### üë• –†–æ–ª—å "–ë–∞–¥–¥–∏"
- [ ] –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–π –∏–ª–∏ –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–π –¥–∞–π–¥–∂–µ—Å—Ç –¥—Ä—É–∑–µ–π
- [ ] –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –¥—Ä—É–≥–∏–º –ø–æ–¥–ø–∏—Å—ã–≤–∞—Ç—å—Å—è –Ω–∞ —Å–≤–æ–∏ –¥–∞–π–¥–∂–µ—Å—Ç—ã
- [ ] –ö–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–π–¥–∂–µ—Å—Ç–æ–≤ –±–∞–¥–¥–∏
- [ ] –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∞–º–∏ –∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è–º–∏

### üõ°Ô∏è –†–æ–ª—å "–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä"
- [ ] –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- [ ] –ú–æ–¥–µ—Ä–∞—Ü–∏—è
- [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –±–æ—Ç–∞

### üé® –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–∏—á–∏
- [ ] –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –≤ –¥–µ–Ω—å
- [ ] –®–∞–±–ª–æ–Ω—ã –ø—Ä–∏–≤—ã—á–µ–∫ —Å –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–∫–∞–º–∏
- [ ] –ú–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- [ ] –≠–∫—Å–ø–æ—Ä—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- [ ] Webhook –≤–º–µ—Å—Ç–æ Long Polling
- [ ] –û—Ç–∫–ª–∞–¥—ã–≤–∞–Ω–∏–µ –ø—Ä–∏–≤—ã—á–µ–∫
- [ ] –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –ø—Ä–∏—ë–º–µ –ª–µ–∫–∞—Ä—Å—Ç–≤/–ø–∏—Ç–∞–Ω–∏–∏

---

**–ù–∞—á–∏–Ω–∞–µ–º —Å –§–∞–∑—ã 1-3 –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞ –ø—Ä–æ–µ–∫—Ç–∞**
